(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{843:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(22),o=n(23),l=n(24),i=n(25),c=n(11),u=n(0),s=n.n(u),d=n(138),m=n(85),f=n(86),h=n(87),p=n(137),v=n(376),b=n(374),y=n(375),E=n(10),g=(n(96),n(29)),w=n(72);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}n(229);var I=n(43),S=function(e){Object(l.a)(n,e);var t=k(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).page=1,a.state={list:[],page:1,count:0,paying:!1,fee:"1",deadline:"5"},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Object(E.loadLocalAccount)();t&&t.secret&&(this.secret=t.secret),this.setState({account:t});var n=window.location.hash,a=null,r=null;if(n){var o=n.indexOf("#",1);o>0&&((o=(n=n.substr(o)).indexOf("#",1))>1?(r=n.substr(o),(r=decodeURIComponent(r))&&this.setState({title:r}),a=n.substr(1,o-1)):a=n.substr(1)),this.loadHongbaoInfo(a)}setTimeout(function(){var t=null;!t&&e.state.account&&(t=e.state.account.peerId),t?e.isTempPeerId(t)&&e.setState({peerId:null}):(t=e.createTempPeerId(),e.setState({peerId:t}));setTimeout(function(){e.loadIframe(t,a),e.setState({iframe:!0})},1e3)}.bind(this),500)}},{key:"loadHongbaoInfo",value:function(e){var t=this,n={action:"hongbao",hash:e};Object(g.bshopCall)(n,function(e,n){if(e&&n){var a={};a.joins=n.list,a.content=n.content,t.setState({hongbao:a})}}.bind(this))}},{key:"loadIframe",value:function(e,t){var n=document.querySelector("#iframe"),a=Object(E.getFileHost)()+"/html/"+e+"/"+t;n.innerHTML="<iframe width='100%' height='500px' frameborder='0' name='_blank' src='"+a+"' />"}},{key:"isTempPeerId",value:function(e){return e&&e.startsWith("0000")}},{key:"createTempPeerId",value:function(){return"0000"+I(18).toString("hex")}},{key:"togglePurchase",value:function(){this.setState({paying:!this.state.paying})}},{key:"doPurchase",value:function(){}},{key:"renderPayButton",value:function(){return s.a.createElement(p.a,{color:"primary"},"\u8bf7\u4e0b\u8f7d\u5c71\u9876\u6d1e\u5b89\u5353\u5ba2\u6237\u7aef\u9886\u53d6\u73b0\u91d1\u7ea2\u5305,",s.a.createElement("a",{href:"http://www.sdoo.cc/sdoo.apk"},"\u70b9\u51fb\u4e0b\u8f7d\u5b89\u5353\u5ba2\u6237\u7aef")," ")}},{key:"renderIframe",value:function(){return s.a.createElement("div",{id:"iframe",style:{width:"100%"}})}},{key:"renderPlayer",value:function(){return this.state.iframe?null:s.a.createElement("div",null,s.a.createElement("div",{id:"status"},s.a.createElement("div",null,s.a.createElement("code",{id:"numPeers"},"0 peers(\u8282\u70b9"),".",s.a.createElement("code",{id:"downloadSpeed"},"0 b/s ")," / \u2197",s.a.createElement("code",{id:"uploadSpeed"},"0 b/s - "),s.a.createElement("code",{id:"downloaded"})," of",s.a.createElement("code",{id:"total"})," \u2014",s.a.createElement("span",{id:"remaining"}))),s.a.createElement("div",{id:"player",style:{width:"100%"}}))}},{key:"renderHongbaoJoins",value:function(){if(!this.state.hongbao||!this.state.hongbao.joins)return null;var e=this.state.hongbao.joins.map(function(e){var t=new Date;t.setTime(e.time);var n=t.toLocaleString();return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(w.a,{rsId:e.senderId})),s.a.createElement("td",null,e.amount,"\u79ef\u5206\u73b0\u91d1"),s.a.createElement("td",null,n))});return s.a.createElement(d.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u8d26\u6237"),s.a.createElement("th",null,"\u9886\u53d6\u7ea2\u5305"),s.a.createElement("th",null,"\u65f6\u95f4"))),s.a.createElement("tbody",null,e))}},{key:"render",value:function(){return s.a.createElement("div",{id:"playdiv"},s.a.createElement(m.a,null,s.a.createElement(f.a,null,this.state.title),s.a.createElement(h.a,null,this.renderPayButton(),this.renderPlayer(),this.renderIframe(),this.renderHongbaoJoins())))}}]),n}(u.Component);u.Component;t.default=S}}]);
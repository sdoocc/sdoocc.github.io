(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{809:function(e,t,n){"use strict";var a=n(4),l=n(0),r=n.n(l),c=n(1),i=n.n(c),o=n(174),s={children:i.a.node},u=function(e){return r.a.createElement(o.a,Object(a.a)({group:!0},e))};u.propTypes=s,t.a=u},855:function(e,t,n){"use strict";n.r(t);var a=n(22),l=n(23),r=n(24),c=n(25),i=n(10),o=n(0),s=n.n(o),u=n(138),h=n(791),m=n(792),d=n(85),f=n(87),E=n(228),p=n(69),g=n(70),k=n(14),v=n(44),b=n(45),y=n(71),I=n(67),O=n(68),A=n(84),w=n(51),L=n(809),D=n(173),B=n(172),j=n(11),T=n(72),x=n(29);n(213);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(i.a)(e);if(t){var l=Object(i.a)(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var N=n(229),C=function(e){Object(r.a)(n,e);var t=S(n);function n(e){var l;return Object(a.a)(this,n),(l=t.call(this,e)).page=1,l.state={accountInfo:null,list:[],dropdownOpen:new Array(2).fill(!1),filterOption:"",filterIdx:0,filterValue:"",page:1,danger:!1,showAccount:!1,blockInfo:null},l.filterOptions=["(\u5168\u90e8)","(\u624b\u7eed\u8d39)","(\u91d1\u989d)","(\u673a\u5668\u4eba)","(\u9ad8\u5ea6)"],l.filterMsg=["","(\u8f93\u5165\u603b\u624b\u7eed\u8d39)","(\u8f93\u5165\u4ea4\u6613\u603b\u91d1\u989d)","(\u8f93\u5165\u673a\u5668\u4eba\u8d26\u53f7)","(\u8f38\u5165\u5340\u584a\u9ad8\u5ea6)"],l}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLoadBlockList(1,this.state.filterIdx)}},{key:"loadLoadBlockList",value:function(e,t,n){var a=this;Object(x.loadAccessRecords)(e,function(e,t){if(e&&t){var n=t.list;a.setState({list:n})}})}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,this.loadLoadBlockList(this.state.page,this.state.filterIdx,this.state.filterValue))}},{key:"toggleDanger",value:function(){this.setState({danger:!this.state.danger})}},{key:"nextPage",value:function(){this.state.page++,this.loadLoadBlockList(this.state.page,this.state.filterIdx,this.state.filterValue)}},{key:"filterBlocks",value:function(){this.loadLoadBlockList(this.state.page,this.state.filterIdx,this.state.filterValue)}},{key:"renderBlockList",value:function(){var e=this.state.list;return e?e.map(function(e){var t=new Date;t.setTime(e.time);var n=t.toLocaleString(),a=Object(j.getRsId)(e.sender);return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(T.a,{rsId:a})),s.a.createElement("td",null,e.action," "),s.a.createElement("td",null,e.type," "),s.a.createElement("td",null,e.ip),s.a.createElement("td",null,n))}):null}},{key:"renderAccountTransactionItem",value:function(){return this.state.accountInfo.transactions.map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,Object(j.getTransactionName)(e.type)),s.a.createElement("td",null,e.from),s.a.createElement("td",null,e.to),s.a.createElement("td",null,e.amount," \u79ef\u5206"),s.a.createElement("td",null,e.fee," \u79ef\u5206"),s.a.createElement("td",null,e.height))})}},{key:"renderAccountTransactions",value:function(){return this.state.accountInfo.transactions?s.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),s.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),s.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),s.a.createElement("th",null,"\u91d1\u989d"),s.a.createElement("th",null,"\u624b\u7eed\u8d39"),s.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),s.a.createElement("tbody",null,this.renderAccountTransactionItem())):null}},{key:"rederAccountInfoDialog",value:function(){return this.state.accountInfo?s.a.createElement(y.a,{isOpen:this.state.showAccount,toggle:this.toggleAccount.bind(this),className:"modal-info "+this.props.className},s.a.createElement(I.a,{toggle:this.toggleAccount.bind(this)},"\u8d26\u6237\u660e\u7ec6"),s.a.createElement(O.a,null,s.a.createElement("p",null,"\u8d26\u6237ID: ",this.state.accountInfo.rsId),s.a.createElement("p",null,"\u8d26\u6237\u516c\u94a5: ",this.state.accountInfo.pk),s.a.createElement("p",null,"\u8d26\u6237\u4f59\u989d: ",this.state.accountInfo.balance),s.a.createElement("p",null,"\u4ea4\u6613\u5217\u8868:"),this.renderAccountTransactions()),s.a.createElement(A.a,null,s.a.createElement(k.a,{color:"danger",onClick:this.toggleAccount.bind(this)},"OK"))):null}},{key:"toggleAccount",value:function(){this.setState({showAccount:!this.state.showAccount})}},{key:"showAccountInfo",value:function(e){this.toggleAccount();var t=Object(j.getShareHost)()+"/btb?action=account&rsIdOrPkHex="+e;N.concat(t,function(e,t,n){if(!e){var a=JSON.parse(n);this.setState({accountInfo:a})}}.bind(this))}},{key:"toggle",value:function(e){var t=this.state.dropdownOpen.map(function(t,n){return n===e&&!t});this.setState({dropdownOpen:t})}},{key:"setFilter",value:function(e){this.setState({page:1,filterIdx:e,filterOption:this.filterMsg[e]})}},{key:"upateFilterValue",value:function(e){if(e&&e.target){var t=e.target.value;this.setState({filterValue:t})}}},{key:"renderFilterOptions",value:function(){var e=this;return this.filterOptions.map(function(t,n){return s.a.createElement(w.a,{onClick:function(t){e.setFilter(n)}},t)})}},{key:"rederBlockInfoDialog",value:function(){return this.state.blockInfo?s.a.createElement(y.a,{isOpen:this.state.danger,toggle:this.toggleDanger.bind(this),className:"modal-info "+this.props.className},s.a.createElement(I.a,{toggle:this.toggleDanger.bind(this)},"\u4ea4\u6613\u533a\u5757\u660e\u7ec6"),s.a.createElement(O.a,null,s.a.createElement("p",null,"\u533a\u5757ID: ",this.state.blockInfo.block.id),s.a.createElement("p",null,"\u533a\u5757\u9ad8\u5ea6: ",this.state.blockInfo.block.height),s.a.createElement("p",null,"\u4ea4\u6613\u5217\u8868:"),this.renderBlockTransactions()),s.a.createElement(A.a,null,s.a.createElement(k.a,{color:"danger",onClick:this.toggleDanger.bind(this)},"OK"))):null}},{key:"renderList",value:function(){var e=this;return this.state.list?s.a.createElement(h.a,null,s.a.createElement(m.a,null,s.a.createElement(d.a,null,s.a.createElement(f.a,null,s.a.createElement(v.a,null,s.a.createElement(L.a,{isOpen:this.state.dropdownOpen[1],toggle:function(){e.toggle(1)}},s.a.createElement(D.a,{caret:!0},"(\u8fc7\u6ee4)"),s.a.createElement(B.a,null,this.renderFilterOptions())),s.a.createElement(b.a,{placeholder:this.state.filterOption,onChange:this.upateFilterValue.bind(this)}),s.a.createElement(k.a,{color:"primary",onClick:function(t){return e.filterBlocks()}},s.a.createElement("i",{className:"fa fa-search"}),"\xa0")),this.rederBlockInfoDialog(),s.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},s.a.createElement("tbody",null,this.renderBlockList(),this.rederAccountInfoDialog())),s.a.createElement("nav",null,s.a.createElement(E.a,null,s.a.createElement(p.a,null,s.a.createElement(g.a,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"\u4e0a\u4e00\u9875")),s.a.createElement(p.a,{active:!0},s.a.createElement(g.a,{tag:"button"},this.state.page)),s.a.createElement(p.a,null,s.a.createElement(g.a,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"\u4e0b\u4e00\u9875")))))))):null}},{key:"renderTransactionItem",value:function(){return this.state.blockInfo.transactions.map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,Object(j.getTransactionName)(e.type)),s.a.createElement("td",null,e.from),s.a.createElement("td",null,e.to),s.a.createElement("td",null,e.amount," \u79ef\u5206"),s.a.createElement("td",null,e.fee," \u79ef\u5206"),s.a.createElement("td",null,e.height))})}},{key:"renderBlockTransactions",value:function(){return this.state.blockInfo.transactions?s.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),s.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),s.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),s.a.createElement("th",null,"\u91d1\u989d"),s.a.createElement("th",null,"\u624b\u7eed\u8d39"),s.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),s.a.createElement("tbody",null,this.renderTransactionItem())):null}},{key:"render",value:function(){return s.a.createElement("div",{className:"animated fadeIn"},this.renderList())}}]),n}(o.Component);t.default=C}}]);
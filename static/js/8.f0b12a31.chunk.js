(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{878:function(e,t,n){"use strict";var r=n(876),i=n.n(r),a=n(877),o=n(22),l=n(23),u=n(26),s=n(24),c=n(25),d=n(0),h=n.n(d),g=n(75),f=n(71),m=n(72),p=n(88),w=n(14),v=n(879),b=n.n(v),E=function(e){return new Promise(function(t,n){var r=new Image;r.addEventListener("load",function(){return t(r)}),r.addEventListener("error",function(e){return n(e)}),r.setAttribute("crossOrigin","anonymous"),r.src=e})};function O(e,t){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(i.a.mark(function e(t,n){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return r=e.sent,(a=document.createElement("canvas")).width=n.width,a.height=n.height,a.getContext("2d").drawImage(r,n.x,n.y,n.width,n.height,0,0,n.width,n.height),e.abrupt("return",new Promise(function(e,t){e(a.toDataURL("image/jpeg",.1))}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return new Promise(function(t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)},!1),n.readAsDataURL(e)})}n.d(t,"a",function(){return y});var y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).onCropChange=function(e){n.setState({crop:e})},n.onCropComplete=function(e,t){console.log(e,t),n.setState({croppedAreaPixels:t})},n.onZoomChange=function(e){n.setState({zoom:e})},n.onFileChange=function(){var e=Object(a.a)(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=5;break}return e.next=3,C(t.target.files[0]);case 3:r=e.sent,n.setState({imageSrc:r,crop:{x:0,y:0},zoom:1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.showCroppedImage=Object(a.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n.state.imageSrc,n.state.croppedAreaPixels);case 2:t=e.sent,n.setState({croppedImage:t}),n.props.onFinish(n.state.croppedImage),n.toggleEditor();case 6:case"end":return e.stop()}},e)})),n.state={mode:"simple",editing:!1,imageSrc:null,crop:{x:0,y:0},zoom:1},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"toggleEditor",value:function(){this.setState({editing:!this.state.editing,imageSrc:null})}},{key:"renderEditor",value:function(){return h.a.createElement(g.a,{isOpen:this.state.editing,toggle:this.toggleEditor.bind(this),className:"modal-info "+this.props.className},h.a.createElement(f.a,{toggle:this.toggleEditor.bind(this)},this.props.title),h.a.createElement(m.a,null,h.a.createElement("div",{style:{width:200,height:300}},h.a.createElement("input",{type:"file",onChange:this.onFileChange}),this.state.imageSrc&&h.a.createElement(b.a,{image:this.state.imageSrc,crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.aspect,onCropChange:this.onCropChange,onCropComplete:this.onCropComplete,onZoomChange:this.onZoomChange}))),h.a.createElement(p.a,null,h.a.createElement(w.a,{color:"danger",onClick:this.showCroppedImage.bind(this)},"\u5b8c\u6210")))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,this.renderEditor(),h.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.toggleEditor()}},this.props.title),this.state.croppedImage&&h.a.createElement("img",{style:{width:50,height:50},src:this.state.croppedImage}))}}]),t}(d.Component)},883:function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(26),o=n(24),l=n(25),u=n(53),s=n(0),c=n.n(s),d=n(413),h=n(411),g=n(412),f=n(12),m=n(249),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e))).toggle=n.toggle.bind(Object(u.a)(Object(u.a)(n))),n.state={popoverOpen:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.shareUrl;t||(t="/#/newsweb#"+this.props.id+"#\u3010\u5c71\u9876\u6d1e\u3011"+this.props.title);var n=Object(f.getCurrentHost)()+t;m.toDataURL(n,function(t,n){e.setState({accountQr:n})})}},{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"renderQr",value:function(){var e=this.state.accountQr;return e?c.a.createElement("img",{src:e,width:250,height:250}):null}},{key:"render",value:function(){var e="Popover-"+this.props.id;return c.a.createElement("span",null,c.a.createElement("span",{className:"alert-primary  fade show",id:e,onClick:this.toggle},"\u5206\u4eab\u94fe\u63a5"),c.a.createElement(d.a,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},c.a.createElement(h.a,{style:{color:"#c03d56"}},this.props.title),c.a.createElement(g.a,null,"https://www.sdoo.cc \u626b\u7801\u67e5\u770b\u8be6\u7ec6\u5185\u5bb9",this.renderQr())))}}]),t}(s.Component);t.a=p},923:function(e,t,n){"use strict";n.r(t);var r=n(22),i=n(23),a=n(26),o=n(24),l=n(25),u=n(0),s=n.n(u);function c(e,t){return e.width===t.width&&e.height===t.height}function d(){return{width:window.innerWidth,height:window.innerHeight}}function h(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}function g(){return{x:window.scrollX,y:window.scrollY}}function f(e){return window.scrollY+e.getBoundingClientRect().top}function m(e){var t=Object(u.useRef)(e);return t.current=e,t}function p(e,t){if(null!==t)return""+(e.rowNumber-(null!==t.firstRenderedRowNumber?t.firstRenderedRowNumber-1:0))}var w=function(e){var t,n=Object(u.useRef)(null),r=function(e){var t=function(){var e=Object(u.useState)(function(){return d()}),t=e[0],n=e[1],r=m(t);return Object(u.useEffect)(function(){function e(){var e=d();c(r.current,e)||n(e)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[r]),t}(),n=function(){var e=Object(u.useState)(g()),t=e[0],n=e[1],r=m(t);return Object(u.useEffect)(function(){function e(){var e,t,i=g();((e=r.current).x!==(t=i).x||e.y!==t.y)&&n(i)}return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[r]),t}(),r=function(e){var t=Object(u.useState)(function(){return e.current?f(e.current):null}),n=t[0],r=t[1];return Object(u.useEffect)(function(){var t=new ResizeObserver(function(e){r(f(e[0].target))});return e.current&&t.observe(e.current),function(){return t.disconnect()}},[e]),n}(e),i=function(e){var t=Object(u.useState)(function(){return e.current?h(e.current):null}),n=t[0],r=t[1],i=m(n);return Object(u.useEffect)(function(){var t=new ResizeObserver(function(e){var t=h(e[0].target);null!==i.current&&c(i.current,t)||r(t)});return e.current&&t.observe(e.current),function(){return t.disconnect()}},[e]),n}(e);return Object(u.useMemo)(function(){return{windowSize:t,windowScroll:n,elementWindowOffset:r,elementSize:i}},[t,n,r,i])}(n),i=function(e,t){var n=t.items,r=t.getWindowMargin,i=t.getGridGap,a=t.getColumnCount,o=t.getItemData,l=e.elementSize?e.elementSize.width:null,s=Object(u.useMemo)(function(){return r?r(e.windowSize.height):e.windowSize.height},[e.windowSize.height,r]),c=Object(u.useMemo)(function(){return null===l?null:i?i(l,e.windowSize.height):0},[l,e.windowSize.height,i]),d=Object(u.useMemo)(function(){return null===l?null:a(l)},[a,l]),h=function(e,t,n){return null===e||null===t||null===n?null:Math.round((n-(e-1)*t)/e)}(d,c,l),g=Object(u.useMemo)(function(){if(null===h)return null;var e=h;return n.map(function(t){return{data:o(t,e),item:t}})},[n,h,o]);return Object(u.useMemo)(function(){return null===s||null===c||null===d||null===g?null:{windowMargin:s,gridGap:c,columnCount:d,entries:g}},[s,c,d,g])}(r,e),a=(t=i,Object(u.useMemo)(function(){if(null===t)return null;var e=1,n=0,r=0,i=t.entries.map(function(i,a){var o=i.data.key,l=a%t.columnCount+1,u=Math.floor(a/t.columnCount)+1;u!==e&&(e=u,n+=r+t.gridGap,r=0);var s=n,c=Math.round(i.data.height);return r=Math.max(r,c),{key:o,columnNumber:l,rowNumber:u,offset:s,height:c,item:i.item}});return{totalHeight:n+r,cells:i}},[t])),o=function(e,t,n){return Object(u.useMemo)(function(){if(null===n||null===t)return null;var r=[],i=null,a=null;if(null!==e.elementWindowOffset)for(var o=e.elementWindowOffset,l=0,u=n.cells;l<u.length;l+=1){var s=u[l],c=o+s.offset,d=e.windowScroll.y;c>d+e.windowSize.height+t.windowMargin||c+s.height<d-t.windowMargin||(null===i&&(i=s.rowNumber),s.rowNumber===i&&(a=a?Math.min(a,s.offset):s.offset),r.push(s))}return{cellsToRender:r,firstRenderedRowNumber:i,firstRenderedRowOffset:a}},[n,t,e.windowScroll.y,e.windowSize.height,e.elementWindowOffset])}(r,i,a),l=function(e,t){var n=Object(u.useState)(!1),r=n[0],i=n[1];return Object(u.useEffect)(function(){var n=new IntersectionObserver(function(e){i(e[0].isIntersecting)},{rootMargin:t});return e.current&&n.observe(e.current),function(){return n.disconnect()}},[e,t]),r}(n,(null!==i?i.windowMargin:0)+"px");return s.a.createElement("div",{ref:n,style:{boxSizing:"border-box",height:null!==a?a.totalHeight:void 0,paddingTop:null!==o&&null!==o.firstRenderedRowOffset?o.firstRenderedRowOffset:0}},l&&s.a.createElement("div",{style:{display:"grid",gridTemplateColumns:null!==i?"repeat("+i.columnCount+", 1fr)":void 0,gridGap:i?i.gridGap:void 0,alignItems:"center"}},null!==o&&o.cellsToRender.map(function(t){return s.a.createElement("div",{key:t.key,style:{height:t.height,gridColumnStart:""+t.columnNumber,gridRowStart:p(t,o)}},e.renderItem(t.item))})))},v=n(12),b=n(14),E=n(75),O=n(71),S=n(72),C=n(88),y=n(46),j=n(43),k=n(39),M=n(47),x=n(44),z=n(87),I=n(82),R=(n(31),n(76),n(102),n(878)),N=(n(883),n(146));function D(e,t){return e>720&&t>480?10:5}function L(e){return Math.floor(e/300)}function P(e){return Math.round(1.5*e)}function A(e,t){var n=e.height/e.width,r=Math.round(t*n);return{key:e.url,height:r}}var T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e))).state={images:[],addProduct:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.location.hash;if(t){var n=t.indexOf("#",1);if(n>0){var r=t.substr(n+1),i=Object(v.hexStringToString)(r).split("#");if(i.length>0){var a=i[0],o=i[1],l=i[2],u=a.split(";"),s=o.split(";");window.localStorage.setItem("ctracker",u[0]),window.localStorage.setItem("cminer",s[0]),l&&window.localStorage.setItem("iServers",l)}}}setTimeout(function(){var t=e.state.images;t.shift({url:"https://x0.ifengimg.com/res/2020/9E73275CDF9E8D0F3D62737B96F4FEC8A9BBC184_size87_w1080_h683.jpeg",height:200,width:200}),e.setState({images:t})},1e3);Object(v.loadLocalAccount)()}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(v.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"doAddCollection",value:function(){}},{key:"updateTitle",value:function(e){if(e&&e.target){var t=e.target.value+".html";this.setState({title:t})}}},{key:"toggleShareNews",value:function(){this.setState({addProduct:!this.state.addProduct,success:!1,dialogMsg:""})}},{key:"rederAddProductDialog",value:function(){var e=this;return s.a.createElement(E.a,{isOpen:this.state.addProduct,toggle:this.toggleShareNews.bind(this),className:"modal-info "+this.props.className},s.a.createElement(O.a,{toggle:this.toggleShareNews.bind(this)},"\u6dfb\u52a0\u63a8\u85a6"),s.a.createElement(S.a,null,s.a.createElement(x.a,null,s.a.createElement("div",{className:"controls"},s.a.createElement(I.a,{onSecret:this.onSecret.bind(this)}))),s.a.createElement(x.a,null,s.a.createElement("div",{className:"controls"},s.a.createElement(y.a,{className:"input-prepend"},s.a.createElement(j.a,{addonType:"prepend"},s.a.createElement(k.a,null,"\u670b\u53cb\u5708\u6807\u9898:")),s.a.createElement(M.a,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTitle.bind(this),placeholder:" \u6807\u9898"})))),s.a.createElement(x.a,null,s.a.createElement(R.a,{title:"\u6dfb\u52a0\u6807\u9898\u7f29\u7565\u56fe",onFinish:function(t){if(t){var n=t.split(";base64,")[1];e.setState({avatar:n})}}})),s.a.createElement(x.a,null,this.renderdialogMsg())),s.a.createElement(C.a,null,s.a.createElement(b.a,{color:"danger",onClick:this.toggleShareNews.bind(this)},"\u5173\u95ed"),s.a.createElement(b.a,{color:"danger",hidden:this.state.success,onClick:function(t){e.setState({dialogMsg:"(\u53d1\u5e03\u4e2d,\u6709\u56fe\u7247\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f)"}),setTimeout(function(){e.doAddCollection()},200)}.bind(this)},"\u53d1\u5e03")))}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?s.a.createElement("div",null,s.a.createElement(z.a,null,this.state.dialogMsg),s.a.createElement(N.a,null)):this.state.dialogMsg?s.a.createElement(z.a,null,this.state.dialogMsg):null}},{key:"renderItem",value:function(e){return s.a.createElement("view",{style:{zIndex:1,position:"relative"}},s.a.createElement("img",{style:{zIndex:90,position:"absolute"},src:e.url,width:e.width,height:e.height}),s.a.createElement("label",{style:{zIndex:100,position:"absolute",color:"red"}},"hello sdoo"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{height:"680px"}},s.a.createElement(w,{items:this.state.images,getGridGap:D,getColumnCount:L,getWindowMargin:P,getItemData:A,renderItem:this.renderItem}),this.rederAddProductDialog(),s.a.createElement(b.a,{onClick:function(t){e.toggleShareNews()},className:"btn-openid btn-brand"},s.a.createElement("i",{className:"fa fa-openid"}),s.a.createElement("span",null,"\u6dfb\u52a0\u63a8\u85a6")))}}]),t}(u.Component);t.default=T}}]);
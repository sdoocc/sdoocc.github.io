(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{844:function(t,e,a){"use strict";a.r(e);var n=a(22),c=a(23),l=a(24),r=a(25),s=a(10),o=a(0),i=a.n(o),u=a(138),h=a(115),m=a(228),d=a(69),E=a(70),f=a(791),g=a(792),v=a(85),b=a(87),p=a(14),T=a(44),k=a(45),y=a(227),A=a(66),I=a(82),P=a(71),O=a(67),C=a(68),j=a(84),N=a(12),S=a(3),w=a.n(S),x=a(29),L=a(72);function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(s.a)(t);if(e){var c=Object(s.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(r.a)(this,a)}}var R=a(229),V=function(t){Object(l.a)(a,t);var e=D(a);function a(t){var c;return Object(n.a)(this,a),(c=e.call(this,t)).page=1,c.state={accounts:null,page:1,transPage:1,showAccount:!1,accountInfo:null,filterValue:"",transactionTab:"0"},c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadAccountList(1,this.state.filterIdx)}},{key:"loadAccountList",value:function(t,e){e||(e=this.state.filterValue);var a=Object(N.getShareHost)()+"/btb?action=listAccount&page="+t+"&query="+e;R.concat(a,function(t,e,a){if(!t&&a)try{var n=JSON.parse(a);this.setState({accounts:n})}catch(c){}}.bind(this))}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,this.loadAccountList(this.state.page))}},{key:"nextPage",value:function(){this.state.page++,this.loadAccountList(this.state.page)}},{key:"renderAccountList",value:function(){var t=this.state.accounts.accounts;return t?t.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(L.a,{rsId:t.rsId})),i.a.createElement("td",null,t.height),i.a.createElement("td",null,t.balance," \u79ef\u5206"),i.a.createElement("td",null,t.mined," \u79ef\u5206"))}):null}},{key:"renderAutoTransactionItem",value:function(){return this.state.autoTransactions.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,Object(N.getTransactionName)(t.type)),i.a.createElement("td",null,t.from),i.a.createElement("td",null,t.to),i.a.createElement("td",null,t.amount," \u79ef\u5206"),i.a.createElement("td",null,"0 \u79ef\u5206"),i.a.createElement("td",null,t.height))})}},{key:"renderAccountTransactionItem",value:function(){return this.state.accountTransactions.map(function(t){return i.a.createElement("tr",null,i.a.createElement("td",null,Object(N.getTransactionName)(t.type)),i.a.createElement("td",null,t.from),i.a.createElement("td",null,t.to),i.a.createElement("td",null,t.amount," \u79ef\u5206"),i.a.createElement("td",null,t.fee," \u79ef\u5206"),i.a.createElement("td",null,t.height))})}},{key:"renderAccountTransactions",value:function(){return"0"==this.state.transactionTab?this.state.accountTransactions?i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),i.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),i.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),i.a.createElement("th",null,"\u91d1\u989d"),i.a.createElement("th",null,"\u624b\u7eed\u8d39"),i.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),i.a.createElement("tbody",null,this.renderAccountTransactionItem())):null:this.state.accountInfo.autoTransactions?i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u4ea4\u6613\u7c7b\u578b"),i.a.createElement("th",null,"\u53d1\u8d77\u8d26\u6237"),i.a.createElement("th",null,"\u63a5\u6536\u8d26\u6237"),i.a.createElement("th",null,"\u91d1\u989d"),i.a.createElement("th",null,"\u624b\u7eed\u8d39"),i.a.createElement("th",null,"\u533a\u5757\u9ad8\u5ea6"))),i.a.createElement("tbody",null,this.renderAutoTransactionItem())):null}},{key:"onTransactionTabClicked",value:function(t){this.state.transactionTab!==t&&(this.setState({transactionTab:t}),"0"===t&&this.loadAccountTransactions(1),"1"===t&&this.loadAutoTransactions(1))}},{key:"renderTransactionsTabs",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement(y.a,{tabs:!0},i.a.createElement(A.a,null,i.a.createElement(I.a,{className:w()({active:"0"===this.state.transactionTab}),onClick:function(){t.onTransactionTabClicked("0")}},i.a.createElement("i",{className:"icon-calculator"}),i.a.createElement(h.a,{color:"success"},"\u8d26\u6237\u4ea4\u6613) "))),i.a.createElement(A.a,null,i.a.createElement(I.a,{className:w()({active:"1"===this.state.transactionTab}),onClick:function(){t.onTransactionTabClicked("1")}},i.a.createElement("i",{className:"icon-basket-loaded"}),i.a.createElement(h.a,{pill:!0,color:"danger"},"\u673a\u5668\u4eba\u4ea4\u6613")))),this.renderAccountTransactions(),this.renderTransactionPagnations())}},{key:"loadAccountTransactions",value:function(t){var e=this,a=this.state.accountInfo.rsId;Object(x.loadAccountTransactions)(a,t,10,function(t,a){if(t&&a){var n=a.transactions;e.setState({accountTransactions:n})}}.bind(this))}},{key:"loadAutoTransactions",value:function(t){var e=this,a=this.state.accountInfo.rsId;Object(x.loadAutoTransactions)(a,t,10,function(t,a){if(t&&a){var n=a.transactions;e.setState({autoTransactions:n})}}.bind(this))}},{key:"preTransPage",value:function(){this.state.transPage>1&&this.state.transPage--,"0"===this.state.transactionTab?this.loadAccountTransactions(this.state.transPage):this.loadAutoTransactions(this.state.transPage)}},{key:"nextTransPage",value:function(){this.state.transPage++,"0"===this.state.transactionTab?this.loadAccountTransactions(this.state.transPage):this.loadAutoTransactions(this.state.transPage)}},{key:"renderTransactionPagnations",value:function(){var t=this;return i.a.createElement(m.a,null,i.a.createElement(d.a,null,i.a.createElement(E.a,{previous:!0,tag:"button",onClick:function(e){t.preTransPage()}},"-")),i.a.createElement(d.a,{active:!0},i.a.createElement(E.a,{tag:"button"},this.state.transPage)),i.a.createElement(d.a,null,i.a.createElement(E.a,{next:!0,tag:"button",onClick:function(e){t.nextTransPage()}},"+")))}},{key:"rederAccountInfoDialog",value:function(){return this.state.accountInfo?i.a.createElement(P.a,{isOpen:this.state.showAccount,toggle:this.toggleAccount.bind(this),className:"modal-info "+this.props.className},i.a.createElement(O.a,{toggle:this.toggleAccount.bind(this)},"\u8d26\u6237\u660e\u7ec6"),i.a.createElement(C.a,null,i.a.createElement("p",null,"\u8d26\u6237ID: ",this.state.accountInfo.rsId),i.a.createElement("p",null,"\u8d26\u6237\u516c\u94a5: ",this.state.accountInfo.pk),i.a.createElement("p",null,"\u8d26\u6237\u4f59\u989d: ",this.state.accountInfo.balance,"\u79ef\u5206"),i.a.createElement("p",null,"\u4ea4\u6613\u5217\u8868:"),this.renderTransactionsTabs()),i.a.createElement(j.a,null,i.a.createElement(p.a,{color:"danger",onClick:this.toggleAccount.bind(this)},"OK"))):null}},{key:"toggleAccount",value:function(){this.setState({showAccount:!this.state.showAccount})}},{key:"showAccountInfo",value:function(t){this.toggleAccount();var e=Object(N.getShareHost)()+"/btb?action=account&rsIdOrPkHex="+t;R.concat(e,function(t,e,a){if(!t){var n=JSON.parse(a),c=n.transactions;this.setState({accountInfo:n,accountTransactions:c})}}.bind(this))}},{key:"updateQueryValue",value:function(t){if(t&&t.target){var e=t.target.value;this.setState({filterValue:e})}}},{key:"renderList",value:function(){var t=this;return this.state.accounts?i.a.createElement(f.a,null,i.a.createElement(g.a,null,i.a.createElement(v.a,null,i.a.createElement(b.a,null,i.a.createElement(T.a,null,i.a.createElement(k.a,{placeholder:"\u641c\u7d22",onChange:this.updateQueryValue.bind(this)}),i.a.createElement(p.a,{color:"primary",onClick:function(e){return t.loadAccountList(1)}},i.a.createElement("i",{className:"fa fa-search"}),"\xa0")),i.a.createElement(u.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u8d26\u6237ID"),i.a.createElement("th",null,"\u9ad8\u5ea6"),i.a.createElement("th",null,"\u4f59\u989d"),i.a.createElement("th",null,"\u673a\u5668\u4eba\u6536\u5165"))),i.a.createElement("tbody",null,this.renderAccountList(),this.rederAccountInfoDialog())),i.a.createElement("nav",null,i.a.createElement(m.a,null,i.a.createElement(d.a,null,i.a.createElement(E.a,{previous:!0,tag:"button",onClick:function(e){t.prePage()}},"\u4e0a\u4e00\u9875")),i.a.createElement(d.a,{active:!0},i.a.createElement(E.a,{tag:"button"},this.state.page," / ",this.state.accounts.total)),i.a.createElement(d.a,null,i.a.createElement(E.a,{next:!0,tag:"button",onClick:function(e){t.nextPage()}},"\u4e0b\u4e00\u9875")))))))):null}},{key:"render",value:function(){return i.a.createElement("div",{className:"animated fadeIn"},this.renderList())}}]),a}(o.Component);e.default=V}}]);